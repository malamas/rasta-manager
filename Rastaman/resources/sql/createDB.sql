DROP TABLE PLAYLIST_SONG;
DROP TABLE PLAYLIST;
DROP TABLE SONG;
DROP TABLE ALBUM;
DROP TABLE LABEL;
DROP TABLE GENRE;

CREATE TABLE LABEL (
    ID              INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    LABEL_NAME      VARCHAR(100) NOT NULL
);

CREATE TABLE ALBUM (
    ID              INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    ALBUM_TITLE     VARCHAR(100) NOT NULL,
    RELEASE_DATE    DATE,
    ALBUM_TYPE      VARCHAR(2),
    DISK_NO         INTEGER,
    LABEL_ID        INTEGER,
    FOREIGN KEY (LABEL_ID) REFERENCES LABEL(ID) ON DELETE RESTRICT
);

CREATE TABLE SONG (
    ID              INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    SONG_TITLE      VARCHAR(100) NOT NULL,
    DURATION        INTEGER,
    TRACK_NO        INTEGER,
    ALBUM_ID        INTEGER,
    FOREIGN KEY (ALBUM_ID) REFERENCES ALBUM(ID) ON DELETE CASCADE
);

CREATE TABLE PLAYLIST (
    ID              INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    PLAYLIST_NAME   VARCHAR(100) NOT NULL
);

CREATE TABLE PLAYLIST_SONG (
    PLAYLIST_ID     INTEGER,
    SONG_ID         INTEGER,
    FOREIGN KEY (PLAYLIST_ID) REFERENCES PLAYLIST(ID) ON DELETE CASCADE,
    FOREIGN KEY (SONG_ID) REFERENCES SONG(ID) ON DELETE CASCADE
);

CREATE TABLE GENRE (
    ID              INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    GENRE_NAME      VARCHAR(100) NOT NULL
);
